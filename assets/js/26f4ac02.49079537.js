"use strict";(self.webpackChunkccl_docs=self.webpackChunkccl_docs||[]).push([[23],{7379:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var t=s(4848),i=s(8453);const a={sidebar_position:4},r="Sending Messages via API",l={id:"3-1-messages",title:"Sending Messages via API",description:"In addition to using the ChitChatLabs UI, you can send messages directly through our API. This guide covers two API endpoints: one for sending a single message and another for sending bulk messages from your contact list.",source:"@site/docs/3-1-messages.md",sourceDirName:".",slug:"/3-1-messages",permalink:"/3-1-messages",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Sending Messages",permalink:"/3-0-messages"},next:{title:"Support",permalink:"/support"}},o={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Important Header",id:"important-header",level:3},{value:"Sending a Single Message",id:"sending-a-single-message",level:2},{value:"Endpoint",id:"endpoint",level:3},{value:"Example Request",id:"example-request",level:3},{value:"Request Body Parameters",id:"request-body-parameters",level:3},{value:"Sending Bulk Messages from Contacts",id:"sending-bulk-messages-from-contacts",level:2},{value:"Endpoint",id:"endpoint-1",level:3},{value:"Example Request",id:"example-request-1",level:3},{value:"Request Body Parameters",id:"request-body-parameters-1",level:3},{value:"Monitoring Message Status",id:"monitoring-message-status",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"sending-messages-via-api",children:"Sending Messages via API"})}),"\n",(0,t.jsxs)(n.p,{children:["In addition to using the ChitChatLabs UI, you can send messages directly through our API. This guide covers two API endpoints: one for sending a ",(0,t.jsx)(n.strong,{children:"single message"})," and another for sending ",(0,t.jsx)(n.strong,{children:"bulk messages"})," from your contact list."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(n.p,{children:"To use the API, ensure you have:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"API Key"}),": You\u2019ll need to include your API key in the header for authentication. Find your API key in the ",(0,t.jsx)(n.strong,{children:"Account Information"})," section under ",(0,t.jsx)(n.a,{href:"https://chitchatlabs.com/#/settings",children:"Settings"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"important-header",children:"Important Header"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"x-tenant-api-key"}),": Add this header to authenticate your API requests."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"sending-a-single-message",children:"Sending a Single Message"}),"\n",(0,t.jsx)(n.p,{children:"The single message API allows you to send a message to an individual recipient without the need to add them to your contacts."}),"\n",(0,t.jsx)(n.h3,{id:"endpoint",children:"Endpoint"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"POST https://app.chitchatlabs.com/chat-service/apis/message/single\n"})}),"\n",(0,t.jsx)(n.h3,{id:"example-request",children:"Example Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl --location \'https://app.chitchatlabs.com/chat-service/apis/message/single\' \\\n--header \'x-tenant-api-key: <YOUR_API_KEY>\' \\\n--header \'Content-Type: application/json\' \\\n--data \'{\n    "to": {\n        "mobile": "919739978284",\n        "name": "Partha"\n    },\n    "fb_template": "habit_run_confirmation_message",\n    "language": "en",\n    "file": {\n      "type": "image",\n      "link": "https://chitchatlabs.github.io/image-service/CCLABS_TENANT/test.png"\n    },\n    "params": [\n        "Partha",\n        "Habit Run November Edition",\n        "24th Nov"\n    ],\n    "tag": "test_tag"\n}\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"request-body-parameters",children:"Request Body Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"to"}),": Specifies the recipient\u2019s details.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"mobile"}),": Recipient\u2019s phone number (e.g., ",(0,t.jsx)(n.code,{children:"919739978284"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"name"}),": Recipient\u2019s name (e.g., ",(0,t.jsx)(n.code,{children:"Partha"}),")."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"fb_template"}),": The message template name in WhatsApp Manager (e.g., ",(0,t.jsx)(n.code,{children:"habit_run_confirmation_message"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"language"}),": The language code for the message (e.g., ",(0,t.jsx)(n.code,{children:"en"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"file"})," (optional): Media to include in the message.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"type"}),": Type of file (",(0,t.jsx)(n.code,{children:"image"}),", ",(0,t.jsx)(n.code,{children:"video"}),", ",(0,t.jsx)(n.code,{children:"document"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"link"}),": URL of the file."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"params"}),": List of parameter values for template personalization (e.g., ",(0,t.jsx)(n.code,{children:'["Partha", "Habit Run November Edition", "24th Nov"]'}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"tag"})," (optional): Custom tag for tracking purposes (e.g., ",(0,t.jsx)(n.code,{children:"test_tag"}),")."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"sending-bulk-messages-from-contacts",children:"Sending Bulk Messages from Contacts"}),"\n",(0,t.jsx)(n.p,{children:"The bulk message API sends messages to multiple contacts filtered by specified criteria. This API works similarly to the bulk messaging function in the ChitChatLabs UI."}),"\n",(0,t.jsx)(n.h3,{id:"endpoint-1",children:"Endpoint"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"POST https://app.chitchatlabs.com/chat-service/apis/message/blast\n"})}),"\n",(0,t.jsx)(n.h3,{id:"example-request-1",children:"Example Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl --location \'https://app.chitchatlabs.com/chat-service/apis/message/blast\' \\\n--header \'x-tenant-api-key: <YOUR_API_KEY>\' \\\n--header \'Content-Type: application/json\' \\\n--data \'{\n    "searchSpec": {"name": "Partha"},\n    "fb_template": "habit_run_confirmation_message",\n    "language": "en",\n    "file": {\n      "type": "image",\n      "link": "https://chitchatlabs.github.io/image-service/CCLABS_TENANT/test.png"\n    },\n    "params": [\n        "{{name}}",\n        "Habit Run November Edition",\n        "24th Nov"\n    ],\n    "tag": "test_tag_bulk"\n}\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"request-body-parameters-1",children:"Request Body Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"searchSpec"}),": Filters for selecting contacts based on contact fields (e.g., ",(0,t.jsx)(n.code,{children:'{ "name": "Partha" }'}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"fb_template"}),": The message template name in WhatsApp Manager (e.g., ",(0,t.jsx)(n.code,{children:"habit_run_confirmation_message"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"language"}),": The language code for the message (e.g., ",(0,t.jsx)(n.code,{children:"en"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"file"})," (optional): Media to include in the message.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"type"}),": Type of file (",(0,t.jsx)(n.code,{children:"image"}),", ",(0,t.jsx)(n.code,{children:"video"}),", ",(0,t.jsx)(n.code,{children:"document"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"link"}),": URL of the file."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"params"}),": List of parameter values, with dynamic placeholders (e.g., ",(0,t.jsx)(n.code,{children:'["{{name}}", "Habit Run November Edition", "24th Nov"]'}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"tag"})," (optional): Custom tag for tracking (e.g., ",(0,t.jsx)(n.code,{children:"test_tag_bulk"}),")."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"monitoring-message-status",children:"Monitoring Message Status"}),"\n",(0,t.jsxs)(n.p,{children:["After sending messages through the API, you can monitor the delivery status and manage any errors using the ",(0,t.jsx)(n.strong,{children:"Messages"})," tab in the ChitChatLabs UI. Here, you can filter sent messages by template, tag, status, and other parameters. Any errors will include specific error types along with links to relevant Facebook documentation for troubleshooting."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var t=s(6540);const i={},a=t.createContext(i);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);